#
#   binary encoders trained on wikipedia
#   see embcompr.example.conf for explanations
#
#      - parameters are set for 8GB of GPU RAM (1080)
#
#      - this configuration is not feasible for large
#        training sets (e.g. enwiki10m) - see the 24G config instead
#
# ------------------------------------------------------------

#  ----------------------------------------| 128 BIT

# [enwiki_100k.mbow-128]
#   [[dimensions]]
#   components = 128
#   [[embedding]]
#   file name = opt/data/enwiki_100k/mbow.embedding.h5


# [enwiki_1m.mbow-128]
#   [[dimensions]]
#   components = 128
#   [[embedding]]
#   file name = opt/data/enwiki_1m/mbow.embedding.h5

# # --------------------

# [enwiki_100k.sent2vec-128]
#   [[dimensions]]
#   components = 128
#   [[embedding]]
#   file name = opt/data/enwiki_100k/sent2vec.embedding.h5


# [enwiki_1m.sent2vec-128]
#   [[dimensions]]
#   components = 128
#   [[embedding]]
#   file name = opt/data/enwiki_1m/sent2vec.embedding.h5

# --------------------

[enwiki_100k.infersent-128]
  [[dimensions]]
  components = 128
  [[embedding]]
  file name = opt/data/enwiki_100k/infersent.embedding.h5


[enwiki_1m.infersent-128]
  [[dimensions]]
  components = 128
  [[embedding]]
  file name = opt/data/enwiki_1m/infersent.embedding.h5


# #  ----------------------------------------| 256 BIT

# [enwiki_100k.mbow-256]
#   [[dimensions]]
#   components = 256
#   [[embedding]]
#   file name = opt/data/enwiki_100k/mbow.embedding.h5

# [enwiki_1m.mbow-256]
#   [[dimensions]]
#   components = 256
#   [[embedding]]
#   file name = opt/data/enwiki_1m/mbow.embedding.h5

# # --------------------

# [enwiki_100k.sent2vec-256]
#   [[dimensions]]
#   components = 256
#   [[embedding]]
#   file name = opt/data/enwiki_100k/sent2vec.embedding.h5

# [enwiki_1m.sent2vec-256]
#   [[dimensions]]
#   components = 256
#   [[embedding]]
#   file name = opt/data/enwiki_1m/sent2vec.embedding.h5

# # --------------------

[enwiki_100k.infersent-256]
  [[dimensions]]
  components = 256
  [[embedding]]
  file name = opt/data/enwiki_100k/infersent.embedding.h5

[enwiki_1m.infersent-256]
  [[dimensions]]
  components = 256
  [[embedding]]
  file name = opt/data/enwiki_1m/infersent.embedding.h5


# #  ----------------------------------------| 512 BIT

# [enwiki_100k.mbow-512]
#   [[dimensions]]
#   components = 512
#   [[embedding]]
#   file name = opt/data/enwiki_100k/mbow.embedding.h5


# [enwiki_1m.mbow-512]
#   [[dimensions]]
#   components = 512
#   [[embedding]]
#   file name = opt/data/enwiki_1m/mbow.embedding.h5

# # --------------------

# [enwiki_100k.sent2vec-512]
#   [[dimensions]]
#   components = 512
#   [[embedding]]
#   file name = opt/data/enwiki_100k/sent2vec.embedding.h5


# [enwiki_1m.sent2vec-512]
#   [[dimensions]]
#   components = 512
#   [[embedding]]
#   file name = opt/data/enwiki_1m/sent2vec.embedding.h5


# # --------------------

[enwiki_100k.infersent-512]
  [[dimensions]]
  components = 512
  [[embedding]]
  file name = opt/data/enwiki_100k/infersent.embedding.h5


[enwiki_1m.infersent-512]
  [[dimensions]]
  components = 512
  [[embedding]]
  file name = opt/data/enwiki_1m/infersent.embedding.h5


#
# ----------------------------------------
#


[defaults]

  [[general]]
  epochs = 10000
  batch size = 256
  noise buffer = 536870912  # 2**29 (2G)

  # with a 2G noise buffer 
  ram chunk size = 1000000  # fit 1m samples
  gpu chunk size = 200000

  [[embedding]]
  provider = h5py

  [[dimensions]]
  codelength = 2

  [[parameters]]
  gumbel scale = 1
  gumbel temperature = 1
  # gumbel temperature = 1, 1, 'lambda x, e: x - 0.25/1000'
  learningrate = 1e-4
  momentum = 0.9
  early stopping = 100, 0.0001
  encoder init = xavier uniform,
  decoder init factor = 1e-3

  [[statistics]]
  folder = opt/current
  losses = 1
  codes = 0
  model = 500
  encoder gradients = 0
  decoder gradients = 0
